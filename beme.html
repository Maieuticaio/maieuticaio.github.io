<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Портфолио — один HTML</title>
  <style>
    :root { --page-xpad: 50px; --nav-item-h: 44px; --gap-vert: 50px; --border-w: 2px; --overlay-dim: rgba(0,0,0,.72); --nav-fs: 1.125rem; --nav-gap: 8px; }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Noto Sans', Arial, 'Apple Color Emoji','Segoe UI Emoji'; color: #000; background: #fff; line-height: 1.4; }
    .nav { position: fixed; top: var(--nav-gap); right: 0; z-index: 40; display: flex; flex-direction: column; gap: var(--nav-gap); pointer-events: auto; font-size: var(--nav-fs); }
    .nav__item { position: relative; background: #000; color: #fff; height: var(--nav-item-h); border: none; margin: 0; padding: 0 15px; width: fit-content; align-self: flex-end; transition: width .25s ease; display: flex; align-items: center; justify-content: center; cursor: pointer; user-select: none; white-space: nowrap; overflow: hidden; border-radius: 0; clip-path: polygon(var(--x1,0%) var(--y1,2%), var(--x2,100%) var(--y2,1%), var(--x3,100%) var(--y3,98%), var(--x4,0%) var(--y4,99%)); outline: var(--border-w) solid #000; outline-offset: 0; }
    .nav__item .label { transition: opacity .18s ease; text-transform: uppercase; }
    .nav__item.collapsed { width: 10px; max-width: 10px; min-width: 0; padding: 0; }
    .nav__item.collapsed .label { opacity: 0; }
    .nav__item.active { outline-color: #111; }
    main { min-height: 100vh; padding: 0 var(--page-xpad) 80px; }
    body.is-home main { padding: 0; }
    section.page { display: none; padding-top: 50px; }
    section.page.active { display: block; }
    #home { padding-top: 0; position: relative; min-height: 100vh; overflow: hidden; }
    .shapes-layer { position: absolute; inset: 0; pointer-events: none; }
    .drop{position:absolute;width:var(--s,36px);height:calc(var(--s,36px)*1.6);pointer-events:none}
    .drop::before{content:"";position:absolute;left:50%;transform:translateX(-50%);bottom:0;width:var(--s,36px);height:calc(var(--s,36px)*1.1);background-repeat:no-repeat;background-size:100% 100%;background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 140' preserveAspectRatio='none'><path d='M50 0 C65 30 84 70 84 95 C84 130 69 140 50 140 C31 140 16 130 16 95 C16 70 35 30 50 0 Z' fill='%23000'/></svg>");}
    .about { display: flex; gap: 24px; align-items: flex-start; justify-content: flex-end; }
    .about__image { flex: 0 0 33.333vw; max-width: 33.333vw; }
    .about__image img { display: block; width: 100%; height: auto; object-fit: cover; }
    .about__text { flex: 1 1 auto; min-width: 280px; font-size: 0.95rem; }
    .about__text > :first-child { margin-top: 0; }
    .home-back{ position: fixed; right: 0; bottom: var(--nav-gap); z-index: 45; height: var(--nav-item-h); background:#000; color:#fff; border:none; border-radius:0; cursor:pointer; padding: 0 15px; display: flex; align-items:center; justify-content:center; font: inherit; clip-path: polygon(var(--x1,0%) var(--y1,2%), var(--x2,100%) var(--y2,1%), var(--x3,100%) var(--y3,98%), var(--x4,0%) var(--y4,99%)); outline: var(--border-w) solid #000; outline-offset: 0; }
    .home-back::before{ content: '>'; color:#fff; display:inline-block; line-height:1; }
    body.is-home .home-back::before{ content: ':>'; }
    .feed { display: flex; flex-direction: column; align-items: flex-start; gap: var(--gap-vert); }
    .block { width: 100%; max-width: 1200px; }
    .block__title { font-weight: 800; margin: 0 0 12px; text-align: left; }
    .gallery { display: flex; gap: 12px; overflow-x: auto; padding-bottom: 8px; scrollbar-width: thin; }
    .gallery::-webkit-scrollbar { height: 10px; }
    .gallery::-webkit-scrollbar-thumb { background: rgba(0,0,0,.3); }
    .gallery::-webkit-scrollbar-track { background: rgba(0,0,0,.08); }
    .media { height: 200px; flex: 0 0 auto; display: flex; align-items: center; justify-content: center; background: #ddd; color: #666; border: none; border-radius: 0; cursor: pointer; position: relative; aspect-ratio: auto; }
    .media img, .media video, .media svg { height: 100%; width: auto; display: block; pointer-events: none; }
    .block__desc { max-width: 60ch; margin-top: 10px; margin-left: 0; text-align: left; font-size: 0.95rem; }
    .lightbox { position: fixed; inset: 0; background: var(--overlay-dim); display: none; place-items: center; z-index: 100; }
    .lightbox.open { display: grid; }
    .lightbox__inner { position: relative; display: grid; place-items: center; width: calc(100vw - 200px - 120px); height: calc(100dvh - 200px); }
    .lightbox__media { display: block; width: 100%; height: 100%; object-fit: contain; border-radius: 0; background: transparent; }
    .lb-btn { position: absolute; top: 50%; transform: translateY(-50%); width: 44px; height: 44px; border-radius: 50%; border: none; cursor: pointer; background: #000; color: #fff; display: grid; place-items: center; font-size: 20px; line-height: 1; }
    .lb-prev { left: -60px; }
    .lb-next { right: -60px; }
    .lb-close { position:absolute; top:-60px; right:0; width:40px; height:40px; background:transparent; color:#000; border:none; cursor:pointer; border-radius:0; display:flex; align-items:center; justify-content:center; font-size:32px; line-height:1; }
    @media (max-width: 640px) { .lb-prev { left: 12px; } .lb-next { right: 12px; } .lb-close { top: 8px; right: 8px; position: fixed; } :root { --page-xpad: 10px; } #about { padding-right: 0; } .lightbox__inner { width: calc(100vw - 20px - 70px); height: calc(100dvh - 20px); } .about { flex-direction: column; align-items: stretch; } .about__image { flex: 0 0 auto; max-width: 100%; } .about__image img { width: 100%; height: auto; object-fit: contain; } .about__text { font-size: 1rem; } }    }
    @media (prefers-reduced-motion: reduce) { .drop { animation: none !important; } }
    .spark{ position:fixed; width:10px; height:10px; background:#000; pointer-events:none; will-change:transform,opacity; z-index:60; opacity:1; }
    .spark.circle{ border-radius:50%; }
    .spark.semi{ border-radius:50% 50% 0 0 / 50% 50% 0 0; overflow:hidden; }
  </style>
</head>
<body>
  <nav class="nav" id="nav">
    <button class="nav__item" data-target="pictures"><span class="label">Картинки</span></button>
    <button class="nav__item" data-target="things"><span class="label">Штуки</span></button>
    <button class="nav__item" data-target="edtech"><span class="label">Ed‑tech</span></button>
    <button class="nav__item" data-target="about"><span class="label">Обо мне</span></button>
  </nav>
  <button class="home-back" id="homeBack" aria-label=":>" title=":>"></button>
  <main>
    <section class="page active" id="home">
      <div class="shapes-layer" id="shapes"></div>
    </section>
    <section class="page" id="pictures">
      <div class="feed">
        <article class="block">
          <h2 class="block__title">Анна Ахматова</h2>
          <div class="gallery" data-gallery>
            <div class="media"><img src="https://maieuticaio.github.io/folder/ichi/Akhmatova/flower-exp.gif" alt="Гиф: цветок — серия «Анна Ахматова»" loading="lazy"></div>
            <div class="media" style="width: 180px" title="Фрейм 2"></div>
            <div class="media" style="width: 320px" title="Фрейм 3"></div>
            <div class="media" style="width: 210px" title="Фрейм 4"></div>
            <div class="media" style="width: 280px" title="Фрейм 5"></div>
          </div>
          <div class="block__desc">Иллюстрации для урока об Анне Ахматовой для старшей школы в Учи.ру.</div>
        </article>
        <article class="block">
          <h2 class="block__title">Серия B</h2>
          <div class="gallery" data-gallery>
            <div class="media" style="width: 200px"></div>
            <div class="media" style="width: 340px"></div>
            <div class="media" style="width: 190px"></div>
            <div class="media" style="width: 270px"></div>
          </div>
          <div class="block__desc">Описание серии B. Колесо мыши или палец прокручивают ленту горизонтально.</div>
        </article>
      </div>
    </section>
    <section class="page" id="things">
      <div class="feed">
        <article class="block">
          <h2 class="block__title">Проект X</h2>
          <div class="gallery" data-gallery>
            <div class="media"><img src="https://maieuticaio.github.io/folder/camphoto_341603450.jpeg" alt="Изображение проекта" loading="lazy" /></div>
            <div class="media" style="width: 240px"></div>
            <div class="media" style="width: 180px"></div>
            <div class="media" style="width: 300px"></div>
          </div>
          <div class="block__desc">Короткое описание проекта X.</div>
        </article>
      </div>
    </section>
    <section class="page" id="edtech">
      <div class="feed">
        <article class="block">
          <h2 class="block__title">Интерактивы</h2>
          <div class="gallery" data-gallery>
            <div class="media" style="width: 300px"></div>
            <div class="media" style="width: 200px"></div>
            <div class="media" style="width: 260px"></div>
          </div>
          <div class="block__desc">Описание образовательных интерактивов.</div>
        </article>
      </div>
    </section>
    <section class="page" id="about">
      <div class="about">
        <div class="about__image">
          <img alt="Фото" src="data:image/svg+xml;utf8,<?xml version='1.0' encoding='UTF-8'?><svg xmlns='http://www.w3.org/2000/svg' width='800' height='1200'><rect width='100%' height='100%' fill='%23e5e5e5'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='48' fill='%23999'>Фото</text></svg>">
        </div>
        <div class="about__text">
          <p><strong>Александра Халбаева</strong> — иллюстратор и дизайнер интерактивов. Здесь будет ваш текст: биография, подход к работе, список клиентов, награды и пр.</p>
          <p>Изображение слева занимает треть ширины экрана и может быть любой высоты. Справа — текст, занимающий оставшуюся ширину.</p>
        </div>
      </div>
    </section>
  </main>
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lightbox__inner" id="lbInner">
      <button class="lb-close" id="lbClose" aria-label="Закрыть">×</button>
      <button class="lb-btn lb-prev" id="lbPrev" aria-label="Предыдущий">‹</button>
      <img class="lightbox__media" id="lbMedia" alt="Просмотр" />
      <button class="lb-btn lb-next" id="lbNext" aria-label="Следующий">›</button>
    </div>
  </div>
  <script>
const $ = (s, r = document) => r.querySelector(s);
const $$ = (s, r = document) => [...r.querySelectorAll(s)];
let currentPage = 'home';
function jitterNavItem(el){
  const r = (a,b)=>(Math.random()*(b-a)+a).toFixed(2);
  el.style.setProperty('--x1','0%');
  el.style.setProperty('--y1',r(0.5,3)+'%');
  el.style.setProperty('--x2','100%');
  el.style.setProperty('--y2',r(0.5,2.5)+'%');
  el.style.setProperty('--x3','100%');
  el.style.setProperty('--y3',r(96.5,99)+'%');
  el.style.setProperty('--x4','0%');
  el.style.setProperty('--y4',r(96.5,99)+'%');
}
function setPage(id){
  const sections = $$('.page');
  const navItems = $$('.nav__item');
  sections.forEach(s => s.classList.toggle('active', s.id === id));
  navItems.forEach(b => b.classList.toggle('active', b.dataset.target === id));
  const isHome = id === 'home';
  document.body.classList.toggle('is-home', isHome);
  navItems.forEach(b => {
    if(isHome){ b.classList.remove('collapsed'); }
    else { b.classList.toggle('collapsed', b.dataset.target !== id); }
  });
  if(location.hash.replace('#','') !== id){ history.replaceState(null, '', '#'+id); }
  currentPage = id;
  if(isHome){ startRain(true); } else { stopRain(); }
}
function startRain(force=false){
  const layer = $('#shapes');
  if(!layer) return;
  if(layer.dataset.mode === 'rain' && layer.children.length && !force) return;
  stopRain();
  layer.innerHTML = '';
  layer.dataset.mode = 'rain';
  const drops = [];
  const makeDrop = (W,H) => {
    const el = document.createElement('div');
    el.className = 'drop';
    const s = Math.round(22 + Math.random()*18);
    el.style.setProperty('--s', s+'px');
    const x = Math.random()*(W - s);
    const y = -Math.random()*H*0.6 - s;
    const vy = (70 + Math.random()*70) * 1.3333;
    layer.appendChild(el);
    return { el, s, x, y, vy };
  };
  let W = layer.clientWidth, H = layer.clientHeight;
  const COUNT = 26;
  for(let i=0;i<COUNT;i++) drops.push(makeDrop(W,H));
  let last = performance.now();
  function loop(now){
    const dt = Math.min(0.05, (now - last)/1000);
    last = now;
    W = layer.clientWidth; H = layer.clientHeight;
    for(const d of drops){
      d.y += d.vy * dt;
      d.el.style.transform = `translate(${Math.round(d.x)}px, ${Math.round(d.y)}px)`;
      if(d.y > H + d.s*1.3){
        d.y = -d.s - Math.random()*H*0.6;
        d.x = Math.random()*(W - d.s);
        d.vy = (70 + Math.random()*70) * 1.3333;
      }
    }
    window.__rainRAF = requestAnimationFrame(loop);
  }
  window.__rainRAF = requestAnimationFrame(loop);
}
function stopRain(){
  const layer = $('#shapes');
  if(window.__rainRAF){ cancelAnimationFrame(window.__rainRAF); window.__rainRAF = null; }
  if(layer){ layer.innerHTML=''; layer.removeAttribute('data-mode'); }
}
function fireworkFromButton(){
  const btn = $('#homeBack'); if(!btn) return;
  const r = btn.getBoundingClientRect();
  const o = { x: r.left + r.width/2, y: r.top + r.height/2 };
  const N = 14; const types = ['square','circle','semi']; const fr = [];
  for(let i=0;i<N;i++){
    const t = types[Math.floor(Math.random()*types.length)];
    const el = document.createElement('div');
    el.className = 'spark' + (t==='square'?'':(t==='circle'?' circle':' semi'));
    const s = Math.round(6 + Math.random()*8);
    el.style.width = s+'px'; el.style.height = s+'px'; el.style.position='fixed'; el.style.zIndex='200';
    document.body.appendChild(el);
    const ang = Math.random()*Math.PI*2;
    let vx = Math.cos(ang) * (220 + Math.random()*240);
    let vy = Math.sin(ang) * (220 + Math.random()*240);
    const ax = Math.cos(ang) * 900;
    const ay = Math.sin(ang) * 900;
    const x0 = o.x - s/2; const y0 = o.y - s/2;
    fr.push({ el, x: x0, y: y0, vx, vy, ax, ay, life: 0 });
  }
  let last = performance.now();
  function tick(now){
    const dt = (now - last)/1000; last = now;
    let alive = 0;
    for(const f of fr){
      f.vx += f.ax * dt; f.vy += f.ay * dt;
      f.x  += f.vx * dt; f.y  += f.vy * dt;
      f.life += dt;
      const fade = Math.max(0, 1 - f.life/0.8);
      f.el.style.left = f.x + 'px';
      f.el.style.top  = f.y + 'px';
      f.el.style.opacity = String(fade);
      if(f.life < 0.8) alive++; else f.el.remove();
    }
    if(alive) requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
}
const lb = $('#lightbox');
const lbMedia = $('#lbMedia');
const lbPrev  = $('#lbPrev');
const lbNext  = $('#lbNext');
const lbClose = $('#lbClose');
let currentGallery = null; let currentIndex = -1;
function setLbMediaFromNode(node){
  const img = node.querySelector('img');
  if(img && (img.currentSrc || img.src)) { lbMedia.setAttribute('src', img.currentSrc || img.src); return; }
  const vid = node.querySelector('video');
  if(vid && (vid.currentSrc || vid.src)) { lbMedia.setAttribute('src', vid.currentSrc || vid.src); return; }
  const svg = node.querySelector('svg');
  if(svg){
    const serialized = new XMLSerializer().serializeToString(svg);
    const prefixed = serialized.includes('xmlns') ? serialized : serialized.replace('<svg','<svg xmlns="http://www.w3.org/2000/svg"');
    lbMedia.setAttribute('src', 'data:image/svg+xml;utf8,' + encodeURIComponent(prefixed));
    return;
  }
  const w = Math.max(400, Math.min(1200, node.clientWidth*3 || 600));
  const h = Math.max(300, Math.min(900,  node.clientHeight*3 || 450));
  const svgPh = encodeURIComponent(`<?xml version="1.0" encoding="UTF-8"?><svg xmlns='http://www.w3.org/2000/svg' width='${w}' height='${h}'><rect width='100%' height='100%' fill='%23dddddd'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='32' fill='%23999'>Превью</text></svg>`);
  lbMedia.setAttribute('src', `data:image/svg+xml;utf8,${svgPh}`);
}
function renderLightbox(){
  if(!currentGallery) return;
  const items = [...currentGallery.querySelectorAll('.media')];
  if(!items.length) return;
  if(currentIndex < 0) currentIndex = 0;
  if(currentIndex >= items.length) currentIndex = items.length - 1;
  setLbMediaFromNode(items[currentIndex]);
}
function openLightbox(gallery, index){
  currentGallery = gallery; currentIndex = index;
  renderLightbox();
  lb.classList.add('open');
  lb.setAttribute('aria-hidden','false');
  document.body.style.overflow = 'hidden';
}
function closeLightbox(){
  lb.classList.remove('open');
  lb.setAttribute('aria-hidden','true');
  document.body.style.overflow = '';
  currentGallery = null; currentIndex = -1;
  lbMedia.removeAttribute('src');
}
document.addEventListener('click', (e) => {
  const media = e.target.closest('.media');
  if(media){
    const gallery = media.closest('[data-gallery]');
    if(gallery){
      const items = [...gallery.querySelectorAll('.media')];
      const index = items.indexOf(media);
      openLightbox(gallery, index);
      return;
    }
  }
  if(e.target === lb) closeLightbox();
});
lbPrev && lbPrev.addEventListener('click', () => { if(!currentGallery) return; const items=[...currentGallery.querySelectorAll('.media')]; currentIndex=(currentIndex-1+items.length)%items.length; renderLightbox(); });
lbNext && lbNext.addEventListener('click', () => { if(!currentGallery) return; const items=[...currentGallery.querySelectorAll('.media')]; currentIndex=(currentIndex+1)%items.length; renderLightbox(); });
lbClose && lbClose.addEventListener('click', closeLightbox);
window.addEventListener('keydown', (e) => { if(!lb.classList.contains('open')) return; if(e.key==='Escape') closeLightbox(); if(e.key==='ArrowLeft') lbPrev.click(); if(e.key==='ArrowRight') lbNext.click(); });
window.addEventListener('DOMContentLoaded', () => {
  const navItems = $$('.nav__item');
  navItems.forEach(btn => { jitterNavItem(btn); btn.addEventListener('click', () => setPage(btn.dataset.target)); });
  const homeBack = $('#homeBack');
  if(homeBack){ jitterNavItem(homeBack); homeBack.addEventListener('click', () => { const isHome = document.body.classList.contains('is-home'); if(isHome){ fireworkFromButton(); } else { setPage('home'); } }); }
  $$('.gallery').forEach(gal => { gal.addEventListener('wheel', (e) => { if(Math.abs(e.deltaY) > Math.abs(e.deltaX)){ e.preventDefault(); gal.scrollLeft += e.deltaY; } }, { passive:false }); });
  const target = (location.hash || '#home').replace('#','');
  setPage(['home','pictures','things','edtech','about'].includes(target) ? target : 'home');
  if(document.body.classList.contains('is-home')){ startRain(true); }
});
window.addEventListener('resize', () => {
  clearTimeout(window.__rsTO);
  window.__rsTO = setTimeout(()=>{
    const navItems = $$('.nav__item');
    navItems.forEach(jitterNavItem);
    if(document.body.classList.contains('is-home')) startRain(true);
  }, 180);
});
</script>
</body>
</html>
