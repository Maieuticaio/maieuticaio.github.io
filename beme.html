<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Портфолио — один HTML</title>
  <style>
    :root {
      --page-xpad: 50px;           /* Постоянные отступы слева/справа */
      --nav-item-h: 44px;          /* Высота открытого прямоугольника навигации */
      --nav-item-h-collapsed: 10px;/* Высота закрытого прямоугольника */
      --gap-vert: 50px;            /* Вертикальные отступы между блоками */
      --border-w: 2px;             /* Толщина условной "ручной" кромки */
      --overlay-dim: rgba(0,0,0,.72); /* Затемнение фона лайтбокса */
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Noto Sans', Arial, 'Apple Color Emoji','Segoe UI Emoji';
      color: #000;
      background: #fff;
      line-height: 1.4;
    }

    /* =================== NAV =================== */
    .nav {
      position: fixed;
      top: 50px;
      right: var(--page-xpad);
      z-index: 40;
      display: flex;
      flex-direction: column;
      gap: 8px;
      pointer-events: auto;
    }
    .nav__item {
      position: relative;
      background: #000;            /* Черный прямоугольник */
      color: #fff;
      height: var(--nav-item-h);
      border: none;
      margin: 0;
      padding: 0 15px;              /* Отступы текста слева/справа по 15px */
      width: fit-content;
      align-self: flex-end;
      transition: width .25s ease;
      display: flex;
      align-items: center;
      justify-content: center;     /* Текст по центру */
      cursor: pointer;
      user-select: none;
      white-space: nowrap;         /* Текст всегда в одну строку */
      overflow: hidden;            /* Чтобы текст исчезал при схлопывании */
      border-radius: 0;            /* Никаких скруглений у прямоугольников */
      /* переход по ширине при схлопывании */
      /* Имитация "неровной" кромки — клип-путь с легким джиттером */
      clip-path: polygon(
        var(--x1,0%)  var(--y1,2%),
        var(--x2,100%) var(--y2,1%),
        var(--x3,100%) var(--y3,98%),
        var(--x4,0%)   var(--y4,99%)
      );
      outline: var(--border-w) solid #000; /* чёткий контур */
      outline-offset: 0;
    }
    .nav__item .label { transition: opacity .18s ease; }
    .nav__item.collapsed { width: 10px; max-width: 10px; min-width: 0; padding: 0; }
    .nav__item.collapsed .label { opacity: 0; }
    .nav__item.active { outline-color: #111; }

    /* =================== PAGE WRAPPER =================== */
    main {
      min-height: 100vh;
      padding: 0 var(--page-xpad) 80px; /* убрали верхний паддинг у main, чтобы общий верхний отступ контролировали страницы */
    }
    /* На главной странице отступов не должно быть */
    body.is-home main { padding: 0; }

    section.page { display: none; }
    section.page.active { display: block; }

    /* Заголовки секций */
    .page h1 { font-size: 28px; margin: 0 0 20px; font-weight: 700; text-align: left; }

    /* Отступ сверху на всех страницах (кроме главной) */
    section.page { padding-top: 50px; }
    #home { padding-top: 0; }
    /* Специальный правый отступ только для страницы "Обо мне": 50px (главный) + 15px (секция) = 65px */
    #about { padding-right: 15px; }

    /* =================== HOME =================== */
    #home {
      position: relative;
      min-height: 100vh; /* во всю высоту экрана для пересечения анимаций */
      overflow: hidden; /* чтобы анимации "вплывали" */
    }
    .shapes-layer { position: absolute; inset: 0; pointer-events: none; }
    .shape, .wave {
      /* волнистая лента; параметры сегмента задаём CSS‑переменными */
      /* ширина сегмента — --segW (по умолчанию 24px), высота сегмента — --segH (по умолчанию 20px) */
      width: 220px; height: 20px;
      background: repeating-linear-gradient(
        90deg,
        #000 0 calc(var(--segW, 24px) / 2),
        transparent calc(var(--segW, 24px) / 2) var(--segW, 24px)
      );
      -webkit-mask: radial-gradient(
          calc(var(--segW, 24px) / 2) calc(var(--segH, 20px) / 2) at calc(var(--segW, 24px) / 2) calc(var(--segH, 20px) / 2),
          #000 98%, transparent
        ) repeat-x left center / var(--segW, 24px) var(--segH, 20px);
              mask: radial-gradient(
          calc(var(--segW, 24px) / 2) calc(var(--segH, 20px) / 2) at calc(var(--segW, 24px) / 2) calc(var(--segH, 20px) / 2),
          #000 98%, transparent
        ) repeat-x left center / var(--segW, 24px) var(--segH, 20px);
      background-clip: padding-box;
    }

    @keyframes floatLR { from{ transform: translateX(-120vw);} to{ transform: translateX(120vw);} }
    @keyframes floatRL { from{ transform: translateX(120vw);} to{ transform: translateX(-120vw);} }
    @keyframes floatTB { from{ transform: translateY(-120vh);} to{ transform: translateY(120vh);} }
    @keyframes floatBT { from{ transform: translateY(120vh);} to{ transform: translateY(-120vh);} }

    /* =================== ABOUT =================== */
    .about {
      display: flex;
      gap: 24px;
      align-items: flex-start;
      justify-content: flex-end; /* выравнивание по правому краю всей полосы */
    }
    .about__image {
      flex: 0 0 33.333vw; /* занимает треть экрана по ширине */
      max-width: 33.333vw;
    }
    .about__image img {
      display: block;
      width: 100%;     /* фиксированная по ширине доля */
      height: auto;    /* любая высота */
      object-fit: cover;
    }
    .about__text { flex: 1 1 auto; min-width: 280px; font-size: 0.8rem; }
    /* Убираем верхний внешний отступ у первого элемента текста, чтобы картинка и текст были ровно по верхнему краю */
    .about__text > :first-child { margin-top: 0; }

    /* =================== FEED PAGES (Картинки, Штуки, Ed‑tech) =================== */
    .feed {
      display: flex;
      flex-direction: column;
      align-items: flex-start; /* все блоки выровнены по правому краю */
      gap: var(--gap-vert);
    }
    .block { width: 100%; max-width: 1200px; }
    .block__title { font-weight: 800; margin: 0 0 12px; text-align: left; }

    .gallery {
      display: flex;
      gap: 12px;
      overflow-x: auto;        /* горизонтальная прокрутка */
      padding-bottom: 8px;
      scrollbar-width: thin;
    }
    .gallery::-webkit-scrollbar { height: 10px; }
    .gallery::-webkit-scrollbar-thumb { background: rgba(0,0,0,.3); }
    .gallery::-webkit-scrollbar-track { background: rgba(0,0,0,.08); }

    .media {
      flex: 0 0 auto;
      height: 150px;           /* фиксированная высота */
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ddd;         /* серые превью-фреймы */
      color: #666;
      border: 1px solid #ccc;
      border-radius: 0;         /* без скруглений */
      cursor: pointer;
      position: relative;
      aspect-ratio: auto;       /* ширина подстраивается под контент */
    }
    .media img, .media video, .media svg {
      height: 100%;
      width: auto;              /* подгон по ширине формата */
      display: block;
      pointer-events: none;
    }
    .block__desc { max-width: 60ch; margin-top: 10px; margin-left: 0; text-align: left; font-size: 0.8rem; }

    /* =================== LIGHTBOX =================== */
    .lightbox { position: fixed; inset: 0; background: var(--overlay-dim); display: none; place-items: center; z-index: 100; }
    .lightbox.open { display: grid; }
    .lightbox__inner {
      position: relative;
      max-width: calc(100vw - 200px);  /* 100px отступы по узкой стороне */
      max-height: calc(100vh - 200px);
      display: inline-block;
    }
    .lightbox__media { display: block; max-width: 100%; max-height: 100%; border-radius: 0; background:#ddd; }
    .lb-btn {
      position: absolute;
      top: 50%; transform: translateY(-50%);
      width: 44px; height: 44px; border-radius: 50%; border: none; cursor: pointer;
      background: #000; color: #fff; display: grid; place-items: center; font-size: 20px; line-height: 1;
    }
    .lb-prev { left: -60px; }
    .lb-next { right: -60px; }
    .lb-close { position: absolute; top: -60px; right: 0; width: 40px; height: 40px; border-radius: 50%; background:#000; color:#fff; border:none; cursor:pointer; }

    /* Адаптив: если очень узко, немного поджимаем стрелки */
    @media (max-width: 640px) {
      .lb-prev { left: -44px; }
      .lb-next { right: -44px; }
      .lb-close { top: -50px; }
    }

    /* Учет доступности: меньше анимаций, если пользователь просит */
    @media (prefers-reduced-motion: reduce) {
      .shape, .wave { animation: none !important; }
    }
  </style>
</head>
<body>
  <!-- =================== NAV =================== -->
  <nav class="nav" id="nav">
    <button class="nav__item" data-target="home"><span class="label">Главная страница</span></button>
    <button class="nav__item" data-target="pictures"><span class="label">Картинки</span></button>
    <button class="nav__item" data-target="things"><span class="label">Штуки</span></button>
    <button class="nav__item" data-target="edtech"><span class="label">Ed‑tech</span></button>
    <button class="nav__item" data-target="about"><span class="label">Обо мне</span></button>
  </nav>

  <main>
    <!-- =================== HOME =================== -->
    <section class="page active" id="home">
                  <div class="shapes-layer" id="shapes"></div>
    </section>

    <!-- =================== PICTURES =================== -->
    <section class="page" id="pictures">
            <div class="feed">
        <article class="block">
          <h2 class="block__title">Серия A</h2>
          <div class="gallery" data-gallery>
            <div class="media" style="width: 260px" title="Фрейм 1"></div>
            <div class="media" style="width: 180px" title="Фрейм 2"></div>
            <div class="media" style="width: 320px" title="Фрейм 3"></div>
            <div class="media" style="width: 210px" title="Фрейм 4"></div>
            <div class="media" style="width: 280px" title="Фрейм 5"></div>
          </div>
          <div class="block__desc">Описание серии A. Серые фреймы разной ширины — заглушки под изображения/видео/GIF/SVG.</div>
        </article>

        <article class="block">
          <h2 class="block__title">Серия B</h2>
          <div class="gallery" data-gallery>
            <div class="media" style="width: 200px"></div>
            <div class="media" style="width: 340px"></div>
            <div class="media" style="width: 190px"></div>
            <div class="media" style="width: 270px"></div>
          </div>
          <div class="block__desc">Описание серии B. Колесо мыши или палец прокручивают ленту горизонтально.</div>
        </article>
      </div>
    </section>

    <!-- =================== THINGS =================== -->
    <section class="page" id="things">
            <div class="feed">
        <article class="block">
          <h2 class="block__title">Проект X</h2>
          <div class="gallery" data-gallery>
            <div class="media" style="width: 220px"></div>
            <div class="media" style="width: 240px"></div>
            <div class="media" style="width: 180px"></div>
            <div class="media" style="width: 300px"></div>
          </div>
          <div class="block__desc">Короткое описание проекта X.</div>
        </article>
      </div>
    </section>

    <!-- =================== EDTECH =================== -->
    <section class="page" id="edtech">
            <div class="feed">
        <article class="block">
          <h2 class="block__title">Интерактивы</h2>
          <div class="gallery" data-gallery>
            <div class="media" style="width: 300px"></div>
            <div class="media" style="width: 200px"></div>
            <div class="media" style="width: 260px"></div>
          </div>
          <div class="block__desc">Описание образовательных интерактивов.</div>
        </article>
      </div>
    </section>

    <!-- =================== ABOUT =================== -->
    <section class="page" id="about">
            <div class="about">
        <div class="about__image">
          <!-- Заглушка-изображение SVG вшито в data URI (замените на свою картинку при желании) -->
          <img alt="Фото" src="data:image/svg+xml;utf8,<?xml version='1.0' encoding='UTF-8'?><svg xmlns='http://www.w3.org/2000/svg' width='800' height='1200'><rect width='100%' height='100%' fill='%23e5e5e5'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='48' fill='%23999'>Фото</text></svg>">
        </div>
        <div class="about__text">
          <p><strong>Александра Халбаева</strong> — иллюстратор и дизайнер интерактивов. Здесь будет ваш текст: биография, подход к работе, список клиентов, награды и пр.</p>
          <p>Изображение слева занимает треть ширины экрана и может быть любой высоты. Справа — текст, занимающий оставшуюся ширину.</p>
        </div>
      </div>
    </section>
  </main>

  <!-- =================== LIGHTBOX =================== -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lightbox__inner" id="lbInner">
      <button class="lb-close" id="lbClose" aria-label="Закрыть">×</button>
      <button class="lb-btn lb-prev" id="lbPrev" aria-label="Предыдущий">‹</button>
      <img class="lightbox__media" id="lbMedia" alt="Просмотр" />
      <button class="lb-btn lb-next" id="lbNext" aria-label="Следующий">›</button>
    </div>
  </div>

  <script>
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];

    /* =================== Навигация и аккордеон =================== */
    const sections = $$('.page');
    const navItems = $$('.nav__item');

    function jitterNavItem(el){
      const r = (min,max) => (Math.random()*(max-min)+min).toFixed(2);
      el.style.setProperty('--x1', '0%');  el.style.setProperty('--y1', r(0.5,3)+'%');
      el.style.setProperty('--x2', '100%'); el.style.setProperty('--y2', r(0.5,2.5)+'%');
      el.style.setProperty('--x3', '100%'); el.style.setProperty('--y3', r(96.5,99)+'%');
      el.style.setProperty('--x4', '0%');  el.style.setProperty('--y4', r(96.5,99)+'%');
    }

    function setPage(id){
      // показать нужную секцию
      sections.forEach(s => s.classList.toggle('active', s.id===id));
      // активная кнопка
      navItems.forEach(btn => btn.classList.toggle('active', btn.dataset.target===id));

      const isHome = (id === 'home');
      document.body.classList.toggle('is-home', isHome);

      // Логика схлопывания: если НЕ Главная — все, кроме активной, схлопываются до 10px
      navItems.forEach(btn => {
        if(isHome){ btn.classList.remove('collapsed'); }
        else { btn.classList.toggle('collapsed', btn.dataset.target !== id); }
      });

      // hash для прямых ссылок
      if(location.hash.replace('#','') !== id){
        history.replaceState(null, '', '#'+id);
      }

      // при возврате на главную — регенерируем слой фигур
      if(isHome){ spawnShapes(true); }
    }

    navItems.forEach(btn => {
      jitterNavItem(btn);
      btn.addEventListener('click', () => setPage(btn.dataset.target));
    });

    // Восстановление страницы по hash при загрузке
    window.addEventListener('DOMContentLoaded', () => {
      const target = (location.hash || '#home').replace('#','');
      setPage(['home','pictures','things','edtech','about'].includes(target) ? target : 'home');
    });

    // Обновлять "неровности" при ресайзе, чтобы не выглядели клонами
    let jitterTO;
    window.addEventListener('resize', () => {
      clearTimeout(jitterTO);
      jitterTO = setTimeout(()=> navItems.forEach(jitterNavItem), 120);
    });

    /* =================== Горизонтальная прокрутка колесом =================== */
    $$('.gallery').forEach(gal => {
      gal.addEventListener('wheel', (e) => {
        if(Math.abs(e.deltaY) > Math.abs(e.deltaX)){
          e.preventDefault();
          gal.scrollLeft += e.deltaY;
        }
      }, { passive:false });
    });

    /* =================== LIGHTBOX =================== */
    const lb = $('#lightbox');
    const lbMedia = $('#lbMedia');
    const lbPrev = $('#lbPrev');
    const lbNext = $('#lbNext');
    const lbClose = $('#lbClose');

    let currentGallery = null;
    let currentIndex = -1;

    function openLightbox(gallery, index){
      currentGallery = gallery;
      currentIndex = index;
      renderLightbox();
      lb.classList.add('open');
      lb.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox(){
      lb.classList.remove('open');
      lb.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      currentGallery = null; currentIndex = -1;
      lbMedia.removeAttribute('src');
    }

    function renderLightbox(){
      if(!currentGallery) return;
      const items = $$('.media', currentGallery);
      if(!items.length) return;
      if(currentIndex < 0) currentIndex = 0;
      if(currentIndex >= items.length) currentIndex = items.length-1;

      const node = items[currentIndex];
      const img = node.querySelector('img');
      if(img && img.getAttribute('src')){
        lbMedia.setAttribute('src', img.getAttribute('src'));
      } else {
        const w = Math.max(400, Math.min(1000, node.clientWidth * 3));
        const h = Math.max(300, Math.min(800, 600));
        const svg = encodeURIComponent(`<?xml version="1.0" encoding="UTF-8"?><svg xmlns='http://www.w3.org/2000/svg' width='${w}' height='${h}'><rect width='100%' height='100%' fill='%23dddddd'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='32' fill='%23999'>Превью</text></svg>`);
        lbMedia.setAttribute('src', `data:image/svg+xml;utf8,${svg}`);
      }
    }

    lbPrev.addEventListener('click', () => { if(currentGallery){ currentIndex = (currentIndex-1+ $$('.media',currentGallery).length) % $$('.media',currentGallery).length; renderLightbox(); } });
    lbNext.addEventListener('click', () => { if(currentGallery){ currentIndex = (currentIndex+1) % $$('.media',currentGallery).length; renderLightbox(); } });
    lbClose.addEventListener('click', closeLightbox);
    lb.addEventListener('click', (e) => { if(e.target === lb) closeLightbox(); });
    window.addEventListener('keydown', (e) => {
      if(!lb.classList.contains('open')) return;
      if(e.key === 'Escape') closeLightbox();
      if(e.key === 'ArrowLeft') lbPrev.click();
      if(e.key === 'ArrowRight') lbNext.click();
    });

    document.addEventListener('click', (e) => {
      const m = e.target.closest('.media');
      if(!m) return;
      const gallery = m.closest('[data-gallery]');
      if(!gallery) return;
      const index = $$('.media', gallery).indexOf(m);
      openLightbox(gallery, index);
    });

    /* =================== HOME: генерация простых плавающих фигур =================== */
    function rand(min,max){ return Math.random()*(max-min)+min }

    function spawnShapes(force=false){
      const layer = $('#shapes');
      if(!layer) return;
      if(layer.children.length && !force) return;
      layer.innerHTML='';
      const W = layer.clientWidth; const H = layer.clientHeight;
      const count = 18;
      const pick = (arr)=> arr[Math.floor(Math.random()*arr.length)];

      for(let i=0;i<count;i++){
        const kind = pick(['square','circle','wave']);
        const dir  = pick(['LR','RL','TB','BT']);
        const el = document.createElement('div');
        el.className = (kind==='wave') ? 'wave' : `shape ${kind}`;

        if(kind==='square'){
          const s = Math.max(12, Math.round((Math.random()*30 + 30) * 0.7)); // уменьшено на ~30%
          el.style.width = s+'px'; el.style.height = s+'px';
          el.style.opacity = .85;
        }
        if(kind==='circle'){
          const s = Math.max(12, Math.round((Math.random()*28 + 28) * 0.7)); // уменьшено на ~30%
          el.style.width = s+'px'; el.style.height = s+'px'; el.style.borderRadius = '50%';
          el.style.opacity = .9;
        }
        if(kind==='wave'){
          const segW = 24; // базовая ширина сегмента
          const segH = Math.round(Math.random()*10)+14; // высота сегмента ~14–24
          const n = (Math.random() < 0.5 ? 4 : 6); // только 4 или 6 секций
          el.style.setProperty('--segW', segW+'px');
          el.style.setProperty('--segH', segH+'px');
          el.style.width = (segW * n) + 'px';
          el.style.height = segH + 'px';
        }

        const dur = (Math.random()*14 + 14).toFixed(2)+'s';
        el.style.animationDuration = dur;
        el.style.animationTimingFunction = 'linear';
        el.style.animationIterationCount = 'infinite';
        // уникальные старты: у каждого элемента свой сдвиг (индекс + джиттер)
        const delaySec = -(i * 1.111 + Math.random()*0.5); // никогда не совпадают
        el.style.animationDelay = delaySec.toFixed(3) + 's';

        if(dir==='LR'){
          const y = Math.random()*(H-40)+10;
          el.style.top = y+'px';
          el.style.left = '-25vw';
          el.style.animationName = 'floatLR';
        } else if(dir==='RL'){
          const y = Math.random()*(H-40)+10;
          el.style.top = y+'px';
          el.style.right = '-25vw';
          el.style.animationName = 'floatRL';
        } else if(dir==='TB'){
          const x = Math.random()*(W-60)+10;
          el.style.left = x+'px';
          el.style.top = '-25vh';
          el.style.animationName = 'floatTB';
        } else {
          const x = Math.random()*(W-60)+10;
          el.style.left = x+'px';
          el.style.bottom = '-25vh';
          el.style.animationName = 'floatBT';
        }

        layer.appendChild(el);
      }
    }

    window.addEventListener('load', () => spawnShapes(true));
    window.addEventListener('resize', () => { clearTimeout(window.__rsTO); window.__rsTO=setTimeout(()=>spawnShapes(true), 180); });
  </script>
</body>
</html>
